 Утилита diff linux - это программа, которая работает в консольном режиме. Ее синтаксис очень прост. Вызовите утилиту, передайте нужные файлы, а также задайте опции, если это необходимо:

$ diff опции файл1 файл2

Можно передать больше двух файлов, если это нужно. Перед тем как перейти к примерам, давайте рассмотрим опции утилиты:

    -q - выводить только отличия файлов;
    -s - выводить только совпадающие части;
    -с - выводить нужное количество строк после совпадений;
    -u - выводить только нужное количество строк после отличий;
    -y - выводить в две колонки;
    -e - вывод в формате ed скрипта;
    -n - вывод в формате RCS;
    -a - сравнивать файлы как текстовые, даже если они не текстовые;
    -t - заменить табуляции на пробелы в выводе;
    -l - разделить на страницы и добавить поддержку листания;
    -r - рекурсивное сравнение папок;
    -i - игнорировать регистр;
    -E - игнорировать изменения в табуляциях;
    -Z - не учитывать пробелы в конце строки;
    -b - не учитывать пробелы;
    -B - не учитывать пустые строки.

Это были основные опции утилиты, теперь давайте рассмотрим как сравнить файлы Linux. В выводе утилиты кроме, непосредственно, отображения изменений, выводит строку в которой указывается в какой строчке и что было сделано. Для этого используются такие символы:

    a - добавлена;
    d - удалена;
    c - изменена.

К тому же, линии, которые отличаются, будут обозначаться символом <, а те, которые совпадают - символом >.

Вот содержимое наших тестовых файлов:

Теперь давайте выполним сравнение файлов diff:

- diff file1 file2


В результате мы получим строчку: 2,3c2,4.

Она означает, что строки 2 и 3 были изменены.

Вы можете использовать опции для игнорирования регистра:

- diff -i file1 file2

Можно сделать вывод в две колонки:

- diff -y file1 file2

Чтобы обработать несколько файлов в папке удобно использовать опцию -r:

- diff -r ~/tmp1 ~/tmp2

Для удобства, вы можете перенаправить вывод утилиты сразу в файл:

- diff -u file1 file2 > file.patch

